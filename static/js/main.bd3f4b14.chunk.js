(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{100:function(e,t,r){},101:function(e,t,r){},103:function(e,t,r){},104:function(e,t,r){},105:function(e,t,r){},109:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(19),i=r.n(c),o=r(64),s=r(7),u=r(115),l=r(117),f=r(114),h=r(22),d=r(9),v=r.n(d),j=r(18),p=r(42),b=r.n(p),O={saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){return JSON.parse(localStorage.getItem(e))}};var x="bouPb7Ob1dDQ3V3OvFX3udSa8KKD2QYq",m="weather",g="favorites",w=O.loadFromStorage(g)||[],y={getGeoWeather:function(){return F.apply(this,arguments)},getCurrWeather:W,addToFavorites:function(e){return w.push(e),O.saveToStorage(g,w),w},removeFromFavorites:function(e){var t=w.findIndex((function(t){return t.id===e}));return-1!==t?(w.splice(t,1),O.saveToStorage(g,w),w):-1},isFavorite:function(e){return w.some((function(t){return t.id===e}))},getFavorites:function(){return w}};function T(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))}function F(){return(F=Object(j.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,t.coords.latitude,t.coords.longitude,"london",e.next=8,W("london");case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(v.a.mark((function e(t){var r,n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=O.loadFromStorage(m))){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,b()("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(x,"&q=").concat(t));case 6:return n=e.sent,e.next=9,b()("https://dataservice.accuweather.com/currentconditions/v1/".concat(n.data[0].Key,"?apikey=").concat(x));case 9:return a=e.sent,e.next=12,b()("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(n.data[0].Key,"?apikey=").concat(x,"&metric=true"));case 12:return c=e.sent,r={id:n.data[0].Key,city:n.data[0].LocalizedName,today:a.data[0],weekly:c.data},O.saveToStorage(m,r),e.abrupt("return",r);case 18:throw e.prev=18,e.t0=e.catch(3),console.log("Error",e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}r(94);var E=r(4),S={changeUnits:function(e){return function(t){t({type:"CHANGE_UNITS",units:e})}}},k=Object(h.b)(null,S)((function(e){function t(t){e.changeUnits(t)}return Object(E.jsx)("header",{className:"header",children:Object(E.jsxs)(u.a,{bg:"light",expand:"lg",children:[Object(E.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(E.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(E.jsxs)(l.a,{className:"mr-auto",children:[Object(E.jsx)(l.a.Link,{href:"#/",children:"Home"}),Object(E.jsx)(l.a.Link,{href:"#favorites",children:"Favorites"}),Object(E.jsxs)(f.a,{title:"\xb0F / \xb0C",id:"basic-nav-dropdown",children:[Object(E.jsx)(f.a.Item,{onClick:function(){return t("c")},children:"Celsius"}),Object(E.jsx)(f.a.Item,{onClick:function(){return t("f")},children:"Fahrenheit"})]})]})})]})})})),N=r(32),R=(r(98),r(16)),_=function(e){var t=e.favorites,r=e.onChangeCurrWeather,n=e.units;function a(e){return"c"===n?"".concat(e.Temperature.Metric.Value," \xb0C"):"".concat(e.Temperature.Imperial.Value," \xb0F")}return Object(E.jsx)("section",{className:"favorites-list flex wrap justify-center",children:t&&t.map((function(e){return Object(E.jsxs)(R.a,{style:{width:"18rem"},className:"flex column align-center",onClick:function(){return r(e)},children:[Object(E.jsx)(R.a.Title,{children:e.city}),Object(E.jsx)(R.a.Text,{children:a(e.today)})]},e.id)}))})},I=(r(99),{setCurrWeather:function(e){return function(t){t({type:"SET_CURR_WEATHER",currWeather:e})}}}),A=Object(h.b)((function(e){return{favorites:e.weatherReducer.favorites,units:e.weatherReducer.units}}),I)((function(e){var t=Object(n.useState)(null),r=Object(N.a)(t,2),a=r[0],c=r[1];return Object(n.useEffect)((function(){c(e.favorites)})),Object(E.jsxs)("div",{className:"favorites flex column align-center",children:[Object(E.jsx)("h2",{children:"Favorites Locations"}),a&&Object(E.jsx)(_,{favorites:a,onChangeCurrWeather:function(t){e.setCurrWeather(t),e.history.push("/")},units:e.units})]})})),D=r(116),U=r(62),V=r(61),L=(r(100),function(e){var t=e.onSearch,r=Object(n.useState)(""),a=Object(N.a)(r,2),c=a[0],i=a[1];function o(e){e.preventDefault(),t(c)}return Object(E.jsx)("section",{className:"location-search",children:Object(E.jsxs)(D.a,{inline:!0,onSubmit:o,children:[Object(E.jsx)(U.a,{type:"text",placeholder:"Search",className:"mr-sm-2",value:c,onChange:function(e){i(e.target.value)}}),Object(E.jsx)(V.a,{onClick:o,variant:"outline-success",children:"Search"})]})})}),P=(r(101),function(e){var t=e.weather,r=e.city,n=e.toggleFavorite,a=e.favBtnText,c=e.units;return Object(E.jsxs)(R.a,{style:{width:"18rem"},className:"weather-preview flex column align-center",children:[Object(E.jsx)(R.a.Title,{children:r}),Object(E.jsx)("i",{onClick:n,className:a}),Object(E.jsx)(R.a.Text,{children:"c"===c?"".concat(t.Temperature.Metric.Value," \xb0C"):"".concat(t.Temperature.Imperial.Value," \xb0F")}),Object(E.jsx)(R.a.Title,{children:t.WeatherText})]})}),M=r(63),H=r.n(M),G=(r(103),function(e){var t=e.WeeklyList,r=e.units;return Object(E.jsx)("section",{className:"weekly-list flex wrap justify-center",children:t.map((function(e){return Object(E.jsxs)(R.a,{style:{width:"18rem"},className:"weather-preview flex column align-center",children:[Object(E.jsx)(R.a.Title,{children:H()(e.Date).format("ddd")}),Object(E.jsx)(R.a.Text,{children:(t=e.Temperature.Minimum.Value,n=e.Temperature.Maximum.Value,"c"===r?"".concat(t," - ").concat(n," \xb0C"):"".concat(Math.floor(1.8*t+32)," - ").concat(Math.floor(1.8*n+32)," \xb0F"))})]},e.EpochDate);var t,n}))})}),K=(r(104),{getGeoWeather:function(){return function(){var e=Object(j.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getGeoWeather();case 3:return r=e.sent,t({type:"SET_CURR_WEATHER",currWeather:r}),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrWeather:function(e){return function(){var t=Object(j.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.getCurrWeather(e);case 3:return n=t.sent,r({type:"SET_CURR_WEATHER",currWeather:n}),t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),console.log("Error",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},addCityToFavorites:function(e){return function(){var t=Object(j.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=y.addToFavorites(e),r({type:"UPDATE_FAVORITES",favorites:n}),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeFromFavorites:function(e){return function(){var t=Object(j.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=y.removeFromFavorites(e),r({type:"UPDATE_FAVORITES",favorites:n}),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),B=Object(h.b)((function(e){return{currWeather:e.weatherReducer.currWeather,units:e.weatherReducer.units}}),K)((function(e){var t=Object(n.useState)(""),r=Object(N.a)(t,2),a=r[0],c=r[1];function i(){return(i=Object(j.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getCurrWeather(r);case 3:n=t.sent,c(y.isFavorite(n.id)?"favorite fas fa-star":"favorite far fa-star"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){e.currWeather?c(y.isFavorite(e.currWeather.id)?"favorite fas fa-star":"favorite far fa-star"):function(){var t=Object(j.a)(v.a.mark((function t(){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getGeoWeather();case 3:r=t.sent,c(y.isFavorite(r.id)?"favorite fas fa-star":"favorite far fa-star"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(E.jsx)("div",{className:"home-page   ",children:e.currWeather&&Object(E.jsxs)("div",{children:[Object(E.jsxs)("span",{className:"header flex space-between",children:[Object(E.jsx)("span",{className:"flex column align-center",children:Object(E.jsx)(P,{weather:e.currWeather.today,city:e.currWeather.city,favBtnText:a,toggleFavorite:function(){y.isFavorite(e.currWeather.id)?e.removeFromFavorites(e.currWeather.id):e.addCityToFavorites(e.currWeather),c(y.isFavorite(e.currWeather.id)?"favorite fas fa-star":"favorite far fa-star")},units:e.units})}),Object(E.jsx)(L,{onSearch:function(e){return i.apply(this,arguments)}})]}),Object(E.jsx)(G,{WeeklyList:e.currWeather.weekly.DailyForecasts,units:e.units})]})})}));r(105);var J=function(){return Object(E.jsx)(o.a,{children:Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(k,{}),Object(E.jsxs)(s.c,{children:[Object(E.jsx)(s.a,{component:A,path:"/favorites"}),Object(E.jsx)(s.a,{component:B,path:"/"})]})]})})},X=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,118)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},q=r(26),Q=r(27),z={currWeather:null,favorites:y.getFavorites(),units:"c"};var Y=r(65),Z=Object(q.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURR_WEATHER":return Object(Q.a)(Object(Q.a)({},e),{},{currWeather:t.currWeather});case"UPDATE_FAVORITES":return Object(Q.a)(Object(Q.a)({},e),{},{favorites:t.favorites});case"CHANGE_UNITS":return Object(Q.a)(Object(Q.a)({},e),{},{units:t.units});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,ee=Object(q.e)(Z,$(Object(q.a)(Y.a)));r(107),r(108);i.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(h.a,{store:ee,children:Object(E.jsx)(J,{})})}),document.getElementById("root")),X()},94:function(e,t,r){},98:function(e,t,r){},99:function(e,t,r){}},[[109,1,2]]]);
//# sourceMappingURL=main.bd3f4b14.chunk.js.map